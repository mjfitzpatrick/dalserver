<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.7.0_211) on Tue Jun 18 13:18:47 MST 2019 -->
<title>SsapService</title>
<meta name="date" content="2019-06-18">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="SsapService";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../dalserver/ssa/SsapQuery.html" title="class in dalserver.ssa"><span class="strong">Prev Class</span></a></li>
<li><a href="../../dalserver/ssa/SsapServlet.html" title="class in dalserver.ssa"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?dalserver/ssa/SsapService.html" target="_top">Frames</a></li>
<li><a href="SsapService.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">dalserver.ssa</div>
<h2 title="Class SsapService" class="title">Class SsapService</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>dalserver.ssa.SsapService</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">SsapService</span>
extends java.lang.Object</pre>
<div class="block">This generic class implements the service operations for a DALServer SSA
 service, independent of the transport protocol (HTTP).

 To configure a data service for a Spectrum data collection, a Spectrum
 table (DBMS table) describing each spectrum dataset is required.  The
 generic SSA service implementation uses this metadata to implement discovery
 queries and to access spectrum datasets.  An additional Spectrum Data table
 may optionally be provided containing data content for the data element(s)
 of the spectrum.  Finally the data service instance must be configured via
 the DALServer service configuration mechanism.

 In most cases this purely data-driven approach will be sufficient to
 provide a SSA service for an Spectrum data collection.  In more advanced
 cases it is possible to subclass the methods of the generic SSA service
 to provide customized functionality.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/ssa/SsapService.html#configDir">configDir</a></strong></code>
<div class="block">Local directory where configuration files are stored.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/ssa/SsapService.html#contentType">contentType</a></strong></code>
<div class="block">File content (MIME) type of any returned datasets.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/ssa/SsapService.html#cutoutTask">cutoutTask</a></strong></code>
<div class="block">File pathname of the vocutout task.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/ssa/SsapService.html#dataDirURL">dataDirURL</a></strong></code>
<div class="block">Local directory where data files are stored.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/ssa/SsapService.html#dbName">dbName</a></strong></code>
<div class="block">The name of the database to be accessed.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/ssa/SsapService.html#dbType">dbType</a></strong></code>
<div class="block">The type of DBMS to be accessed, if any.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.io.InputStream</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/ssa/SsapService.html#in1">in1</a></strong></code>
<div class="block">Imagefile input stream (keep for later close()).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.io.InputStream</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/ssa/SsapService.html#in2">in2</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/ssa/SsapService.html#jdbcDriver">jdbcDriver</a></strong></code>
<div class="block">The JDBC driver to be used for the connection.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/ssa/SsapService.html#jdbcUrl">jdbcUrl</a></strong></code>
<div class="block">The JDBC URL (endpoint) of the DBMS.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/ssa/SsapService.html#mdfile">mdfile</a></strong></code>
<div class="block">MDFILE name if accessing a virtual spectrum dataset.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/ssa/SsapService.html#minorVersion">minorVersion</a></strong></code>
<div class="block">The minor service version (for custom services).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/ssa/SsapService.html#serviceClass">serviceClass</a></strong></code>
<div class="block">The service class assumed by the caller, e.g., if the service
 implementation supports multiple service protocols such as SCS
 and TAP.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/ssa/SsapService.html#serviceName">serviceName</a></strong></code>
<div class="block">The service name, used to identify resources associated with this
 service instance.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/ssa/SsapService.html#serviceVersion">serviceVersion</a></strong></code>
<div class="block">The service or protocol version.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/ssa/SsapService.html#stagingDir">stagingDir</a></strong></code>
<div class="block">Local directory where dynamically generated spectrums are stored.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/ssa/SsapService.html#tableName">tableName</a></strong></code>
<div class="block">The name of the table to be accessed (for the SSAP metadata).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../dalserver/TaskManager.html" title="class in dalserver">TaskManager</a></code></td>
<td class="colLast"><code><strong><a href="../../dalserver/ssa/SsapService.html#taskman">taskman</a></strong></code>
<div class="block">Task Manager</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/ssa/SsapService.html#tdLocation">tdLocation</a></strong></code>
<div class="block">Tasking daemon location.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/ssa/SsapService.html#tdName">tdName</a></strong></code>
<div class="block">Tasking daemon name.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../dalserver/ssa/SsapService.html#SsapService(dalserver.ssa.SsapParamSet,%20dalserver.TaskManager)">SsapService</a></strong>(<a href="../../dalserver/ssa/SsapParamSet.html" title="class in dalserver.ssa">SsapParamSet</a>&nbsp;params,
           <a href="../../dalserver/TaskManager.html" title="class in dalserver">TaskManager</a>&nbsp;taskman)</code>
<div class="block">Create a new local SSAP service instance.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.io.InputStream</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/ssa/SsapService.html#accessData(dalserver.ssa.SsapParamSet,%20dalserver.RequestResponse)">accessData</a></strong>(<a href="../../dalserver/ssa/SsapParamSet.html" title="class in dalserver.ssa">SsapParamSet</a>&nbsp;params,
          <a href="../../dalserver/RequestResponse.html" title="class in dalserver">RequestResponse</a>&nbsp;response)</code>
<div class="block">Directly access an individual spectrum dataset, returning a spectrum
 or spectrum subset to the client.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/ssa/SsapService.html#accessDataClose(java.io.InputStream)">accessDataClose</a></strong>(java.io.InputStream&nbsp;in)</code>
<div class="block">Clean up after a call to accessData.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../dalserver/KeywordTable.html" title="class in dalserver">KeywordTable</a></code></td>
<td class="colLast"><code><strong><a href="../../dalserver/ssa/SsapService.html#defineVirtualSpectrum(dalserver.ssa.SsapParamSet,%20java.lang.String)">defineVirtualSpectrum</a></strong>(<a href="../../dalserver/ssa/SsapParamSet.html" title="class in dalserver.ssa">SsapParamSet</a>&nbsp;params,
                     java.lang.String&nbsp;spectrumfile)</code>
<div class="block">Given an archival spectrum and a set of filter parameters (POS, SIZE,
 BAND, TIME, POL), compute the metadata for a virtual spectrum
 corresponding to the given cutout.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.io.InputStream</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/ssa/SsapService.html#getCapabilities(dalserver.ssa.SsapParamSet)">getCapabilities</a></strong>(<a href="../../dalserver/ssa/SsapParamSet.html" title="class in dalserver.ssa">SsapParamSet</a>&nbsp;params)</code>
<div class="block">Process a service metadata query, returning a description of the
 service to the client as a structured XML document.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/ssa/SsapService.html#getSpectrumURL(dalserver.ssa.SsapQuery,%20java.lang.String,%20boolean)">getSpectrumURL</a></strong>(<a href="../../dalserver/ssa/SsapQuery.html" title="class in dalserver.ssa">SsapQuery</a>&nbsp;ssap,
              java.lang.String&nbsp;pubDid,
              boolean&nbsp;preview)</code>
<div class="block">Parse a Publisher Dataset Identifier (PubDID) and return a URL
 referencing the corresponding spectrum within the local archive.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/ssa/SsapService.html#main(java.lang.String[])">main</a></strong>(java.lang.String[]&nbsp;args)</code>
<div class="block">Unit test to do a simple query.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/ssa/SsapService.html#queryData(dalserver.ssa.SsapParamSet,%20dalserver.RequestResponse)">queryData</a></strong>(<a href="../../dalserver/ssa/SsapParamSet.html" title="class in dalserver.ssa">SsapParamSet</a>&nbsp;params,
         <a href="../../dalserver/RequestResponse.html" title="class in dalserver">RequestResponse</a>&nbsp;response)</code>
<div class="block">Process a data query and generate a list of candidate spectrum
 datasets matching the query parameters.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="serviceName">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>serviceName</h4>
<pre>protected&nbsp;java.lang.String serviceName</pre>
<div class="block">The service name, used to identify resources associated with this
 service instance.</div>
</li>
</ul>
<a name="serviceClass">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>serviceClass</h4>
<pre>protected&nbsp;java.lang.String serviceClass</pre>
<div class="block">The service class assumed by the caller, e.g., if the service
 implementation supports multiple service protocols such as SCS
 and TAP.</div>
</li>
</ul>
<a name="serviceVersion">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>serviceVersion</h4>
<pre>protected&nbsp;java.lang.String serviceVersion</pre>
<div class="block">The service or protocol version.</div>
</li>
</ul>
<a name="minorVersion">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>minorVersion</h4>
<pre>protected&nbsp;java.lang.String minorVersion</pre>
<div class="block">The minor service version (for custom services).</div>
</li>
</ul>
<a name="dbType">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dbType</h4>
<pre>protected&nbsp;java.lang.String dbType</pre>
<div class="block">The type of DBMS to be accessed, if any.</div>
</li>
</ul>
<a name="dbName">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dbName</h4>
<pre>protected&nbsp;java.lang.String dbName</pre>
<div class="block">The name of the database to be accessed.</div>
</li>
</ul>
<a name="tableName">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tableName</h4>
<pre>protected&nbsp;java.lang.String tableName</pre>
<div class="block">The name of the table to be accessed (for the SSAP metadata).</div>
</li>
</ul>
<a name="jdbcUrl">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>jdbcUrl</h4>
<pre>protected&nbsp;java.lang.String jdbcUrl</pre>
<div class="block">The JDBC URL (endpoint) of the DBMS.</div>
</li>
</ul>
<a name="jdbcDriver">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>jdbcDriver</h4>
<pre>protected&nbsp;java.lang.String jdbcDriver</pre>
<div class="block">The JDBC driver to be used for the connection.</div>
</li>
</ul>
<a name="configDir">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>configDir</h4>
<pre>protected&nbsp;java.lang.String configDir</pre>
<div class="block">Local directory where configuration files are stored.</div>
</li>
</ul>
<a name="dataDirURL">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dataDirURL</h4>
<pre>protected&nbsp;java.lang.String dataDirURL</pre>
<div class="block">Local directory where data files are stored.</div>
</li>
</ul>
<a name="stagingDir">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stagingDir</h4>
<pre>protected&nbsp;java.lang.String stagingDir</pre>
<div class="block">Local directory where dynamically generated spectrums are stored.</div>
</li>
</ul>
<a name="contentType">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>contentType</h4>
<pre>protected&nbsp;java.lang.String contentType</pre>
<div class="block">File content (MIME) type of any returned datasets.</div>
</li>
</ul>
<a name="cutoutTask">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cutoutTask</h4>
<pre>protected&nbsp;java.lang.String cutoutTask</pre>
<div class="block">File pathname of the vocutout task.</div>
</li>
</ul>
<a name="tdName">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tdName</h4>
<pre>protected&nbsp;java.lang.String tdName</pre>
<div class="block">Tasking daemon name.</div>
</li>
</ul>
<a name="tdLocation">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tdLocation</h4>
<pre>protected&nbsp;java.lang.String tdLocation</pre>
<div class="block">Tasking daemon location.</div>
</li>
</ul>
<a name="mdfile">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mdfile</h4>
<pre>protected&nbsp;java.lang.String mdfile</pre>
<div class="block">MDFILE name if accessing a virtual spectrum dataset.</div>
</li>
</ul>
<a name="in1">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>in1</h4>
<pre>protected&nbsp;java.io.InputStream in1</pre>
<div class="block">Imagefile input stream (keep for later close()).</div>
</li>
</ul>
<a name="in2">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>in2</h4>
<pre>protected&nbsp;java.io.InputStream in2</pre>
</li>
</ul>
<a name="taskman">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>taskman</h4>
<pre>protected&nbsp;<a href="../../dalserver/TaskManager.html" title="class in dalserver">TaskManager</a> taskman</pre>
<div class="block">Task Manager</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="SsapService(dalserver.ssa.SsapParamSet, dalserver.TaskManager)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>SsapService</h4>
<pre>public&nbsp;SsapService(<a href="../../dalserver/ssa/SsapParamSet.html" title="class in dalserver.ssa">SsapParamSet</a>&nbsp;params,
           <a href="../../dalserver/TaskManager.html" title="class in dalserver">TaskManager</a>&nbsp;taskman)</pre>
<div class="block">Create a new local SSAP service instance.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>params</code> - Input parameter set.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="queryData(dalserver.ssa.SsapParamSet, dalserver.RequestResponse)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>queryData</h4>
<pre>public&nbsp;void&nbsp;queryData(<a href="../../dalserver/ssa/SsapParamSet.html" title="class in dalserver.ssa">SsapParamSet</a>&nbsp;params,
             <a href="../../dalserver/RequestResponse.html" title="class in dalserver">RequestResponse</a>&nbsp;response)
               throws <a href="../../dalserver/DalServerException.html" title="class in dalserver">DalServerException</a></pre>
<div class="block">Process a data query and generate a list of candidate spectrum
 datasets matching the query parameters.  The datasets referenced
 in the query response may be physical datasets, or virtual datasets
 which will be generated on demand, only if subsequently requested
 by the client.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>params</code> - The fully processed SSAP parameter set representing
                          the request to be processed.</dd><dd><code>response</code> - A dalserver request response object to which the
                          query response should be written.  Note this is
                          not a file, but an object containing the metadata
                          to be returned to the client.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../dalserver/DalServerException.html" title="class in dalserver">DalServerException</a></code></dd></dl>
</li>
</ul>
<a name="accessData(dalserver.ssa.SsapParamSet, dalserver.RequestResponse)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>accessData</h4>
<pre>public&nbsp;java.io.InputStream&nbsp;accessData(<a href="../../dalserver/ssa/SsapParamSet.html" title="class in dalserver.ssa">SsapParamSet</a>&nbsp;params,
                             <a href="../../dalserver/RequestResponse.html" title="class in dalserver">RequestResponse</a>&nbsp;response)
                               throws <a href="../../dalserver/DalServerException.html" title="class in dalserver">DalServerException</a></pre>
<div class="block">Directly access an individual spectrum dataset, returning a spectrum
 or spectrum subset to the client.  The MODE parameter determines
 whether an archival dataset is returned, or a virtual spectrum is
 generated and returned.

 The dataset to be returned may be an archival spectrum dataset,
 a precomputed virtual spectrum (e.g., the parameters of the
 virtual spectrum were computed in a queryData response but the
 spectrum has not yet been generated), or a dynamically computed virtual
 spectrum dataset computed and generated according to the accessData
 task parameters input in the client request.

 In cases where an existing archival or virtual dataset is to be
 returned the dataset is specified by the PubDID parameter in the
 input request.  The value of PubDID is an IVOA dataset identifier
 as returned in an earlier call to the queryData operation.

 The interpretation of PubDID is entirely up to the service.  In
 a simple case it provides a key which can be used to retrieve an 
 archival dataset.  In another case, the service might generate a
 unique PubDID on the fly for each virtual dataset described in the
 query response (e.g., for a cutout or other virtual dataset), either
 building sufficient information into the PubDID (and hence the URL)
 to specify the dataset to be generated, or saving internally a 
 persistent description of the virtual dataset, indexed by the PubDID.
 The service can later generate the dataset on the fly if and when it
 is subsequently requested by the client.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>params</code> - The fully processed SSAP parameter set representing
                        the request to be processed.  Upon output the
                        parameters "datasetContentType" and
                        "datasetContentLength" are added to specify
                        the content (MIME) type of the dataset to be returned,
                        and the size of the data entity to be returned, if
                        known.  Since data entities may be dynamically
                        computed or may be dynamic streams, the content
                        length is not always known in advance, in which
                        case the value should be set to null.</dd><dd><code>response</code> - A request response object.  Not currently used.</dd>
<dt><span class="strong">Returns:</span></dt><dd>An InputStream is returned which can be can be used
                        read the dataset as a byte stream; it is
                        up to the caller to close the returned stream when
                        the data has been read.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../dalserver/DalServerException.html" title="class in dalserver">DalServerException</a></code></dd></dl>
</li>
</ul>
<a name="accessDataClose(java.io.InputStream)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>accessDataClose</h4>
<pre>public&nbsp;void&nbsp;accessDataClose(java.io.InputStream&nbsp;in)</pre>
<div class="block">Clean up after a call to accessData.  This is used to close the
 InputStream returned by a prior call to accessData (passed as the
 function value), as well as any other resources used internally
 by accessData.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>in</code> - InputStream to be closed</dd></dl>
</li>
</ul>
<a name="defineVirtualSpectrum(dalserver.ssa.SsapParamSet, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>defineVirtualSpectrum</h4>
<pre>public&nbsp;<a href="../../dalserver/KeywordTable.html" title="class in dalserver">KeywordTable</a>&nbsp;defineVirtualSpectrum(<a href="../../dalserver/ssa/SsapParamSet.html" title="class in dalserver.ssa">SsapParamSet</a>&nbsp;params,
                                 java.lang.String&nbsp;spectrumfile)
                                   throws <a href="../../dalserver/DalServerException.html" title="class in dalserver">DalServerException</a></pre>
<div class="block">Given an archival spectrum and a set of filter parameters (POS, SIZE,
 BAND, TIME, POL), compute the metadata for a virtual spectrum
 corresponding to the given cutout.  The computed metadata is
 returned in a KeywordTable object, and is also written to the
 virtual spectrum staging area to permit later creation and
 retrieval of the virtual spectrum.  Only metadata values that differ
 from the parent archival spectrum are returned.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>params</code> - A SSAPV2 parameter set, from either
                                accessData or queryData, containing
                                filter parameters and a PubDID referencing
                                the parent spectrum.</dd><dd><code>spectrumfile</code> - If not null, use the given spectrumfile
                                pathname instead of computing the spectrum
                                reference from PubDID.</dd>
<dt><span class="strong">Returns:</span></dt><dd>A KeywordTable object containing the
                                changed metadata.  A MDFILE is also written
                                to the staging area to allow later generation
                                of the referenced virtual spectrum.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../dalserver/DalServerException.html" title="class in dalserver">DalServerException</a></code></dd></dl>
</li>
</ul>
<a name="getSpectrumURL(dalserver.ssa.SsapQuery, java.lang.String, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSpectrumURL</h4>
<pre>protected&nbsp;java.lang.String&nbsp;getSpectrumURL(<a href="../../dalserver/ssa/SsapQuery.html" title="class in dalserver.ssa">SsapQuery</a>&nbsp;ssap,
                              java.lang.String&nbsp;pubDid,
                              boolean&nbsp;preview)
                                   throws <a href="../../dalserver/DalServerException.html" title="class in dalserver">DalServerException</a></pre>
<div class="block">Parse a Publisher Dataset Identifier (PubDID) and return a URL
 referencing the corresponding spectrum within the local archive.
 There are two cases here, a PubDID that references an archival
 spectrum via a DBMS index table, and a PubDID that references a
 virtual spectrum in the staging area via its MDFILE (metadata file).</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>ssap</code> - SsapQuery instance or null</dd><dd><code>pubDid</code> - Publisher dataset identifier</dd><dd><code>preview</code> - Return preview instead of full dataset</dd>
<dt><span class="strong">Returns:</span></dt><dd>The URL of the spectrumfile, or null for a
                                virtual spectrum reference, with the MDFILE
                                name returned in this.mdfile.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../dalserver/DalServerException.html" title="class in dalserver">DalServerException</a></code></dd></dl>
</li>
</ul>
<a name="getCapabilities(dalserver.ssa.SsapParamSet)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCapabilities</h4>
<pre>public&nbsp;java.io.InputStream&nbsp;getCapabilities(<a href="../../dalserver/ssa/SsapParamSet.html" title="class in dalserver.ssa">SsapParamSet</a>&nbsp;params)
                                    throws java.io.FileNotFoundException</pre>
<div class="block">Process a service metadata query, returning a description of the
 service to the client as a structured XML document.  In the generic
 form this operation returns an InputStream to an actual file in
 the local file system on the server.  The file name is formed by
 concatenating the serviceName with "Capabilities.xml".  The file
 is assumed to be available in the directory specified when the
 SsapService object was created, e.g., "path/myServiceCapabilities.xml".
 More generally, the service capabilities do not have to be maintained
 in a static file and could be dynamically generated (e.g., from a
 database version), so long as a valid InputStream is returned.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>params</code> - The fully processed SSAP parameter set representing
                        the request to be processed.</dd>
<dt><span class="strong">Returns:</span></dt><dd>An InputStream which can be used to read the 
                        formatted getCapabilities metadata document.
                        It is up to the caller to close the returned stream
                        when the data has been read.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.FileNotFoundException</code></dd></dl>
</li>
</ul>
<a name="main(java.lang.String[])">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>main</h4>
<pre>public static&nbsp;void&nbsp;main(java.lang.String[]&nbsp;args)
                 throws <a href="../../dalserver/DalServerException.html" title="class in dalserver">DalServerException</a>,
                        java.io.IOException,
                        java.io.FileNotFoundException</pre>
<div class="block">Unit test to do a simple query.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../dalserver/DalServerException.html" title="class in dalserver">DalServerException</a></code></dd>
<dd><code>java.io.IOException</code></dd>
<dd><code>java.io.FileNotFoundException</code></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../dalserver/ssa/SsapQuery.html" title="class in dalserver.ssa"><span class="strong">Prev Class</span></a></li>
<li><a href="../../dalserver/ssa/SsapServlet.html" title="class in dalserver.ssa"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?dalserver/ssa/SsapService.html" target="_top">Frames</a></li>
<li><a href="SsapService.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
